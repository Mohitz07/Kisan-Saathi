<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Kisan-Sathi - Dashboard</title>

    <!-- Styles -->
    <link rel="stylesheet" href="style.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>
    <!-- Google Fonts for Devanagari support -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Devanagari:wght@400;700&display=swap" rel="stylesheet"/>
</head>
<body>
<!-- Header Navigation -->
<header class="header">
    <div class="header-container">
        <div class="logo">
            <i class="fas fa-seedling"></i>
            <span class="logo-text">Kisan-Sathi</span>
        </div>
        <nav class="nav-menu">
            <a href="#dashboard" class="nav-item active" data-i18n="header.dashboard">Dashboard</a>
            <a href="#weather" class="nav-item" data-i18n="header.weather">Weather</a>
            <a href="#disease" class="nav-item" data-i18n="header.disease">Disease Detection</a>
            <a href="#soil" class="nav-item" data-i18n="header.soil">Soil Monitor</a>
            <a href="#market" class="nav-item" data-i18n="header.market">Market Prices</a>
        </nav>
        <div class="header-right">
            <div class="language-selector">
                <i class="fas fa-globe"></i>
                <select id="languageSelect" class="language-dropdown">
                    <option value="en">English</option>
                    <option value="hi">हिंदी</option>
                    <option value="mr">मराठी</option>
                </select>
            </div>
        </div>
    </div>
</header>

<!-- Main Hero Section -->
<section class="hero-section" id="dashboard">
    <div class="hero-container">
        <div class="hero-content">
            <h1 data-i18n="hero.title">Smart Farming with AI Assistance</h1>
            <p data-i18n="hero.subtitle">Kisan-Sathi empowers farmers with AI-driven insights for sustainable agriculture. Make data-informed decisions for better crop yields and farming practices.</p>
            <div class="hero-buttons">
                <button class="btn-primary" id="analyzeCropBtn">
                    <i class="fas fa-chart-line"></i>
                    <span class="btn-text" data-i18n="hero.analyze">Analyze Your Crop</span>
                </button>
                <button class="btn-secondary">
                    <i class="fas fa-book"></i>
                    <span class="btn-text" data-i18n="hero.knowledge">Knowledge Hub</span>
                </button>
            </div>
        </div>
        <div class="hero-image">
            <img src="image/farmer-with-mobile.jpeg" alt="Smart Farming" class="hero-img"/>
        </div>
    </div>
</section>

<!-- Features Grid Section -->
<section class="features-section" id="features">
    <div class="features-container">
        <!-- Disease Detection Card -->
        <div class="feature-card disease-card" id="disease">
            <div class="feature-icon">
                <i class="fas fa-leaf"></i>
            </div>
            <h3 data-i18n="features.disease.title">Disease Detection</h3>
            <p data-i18n="features.disease.desc">Upload crop images for AI-powered disease identification and treatment recommendations.</p>
            <div class="feature-actions">
                <input type="file" id="diseaseImageInput" accept="image/*" style="display:none;"/>
                <button class="feature-btn" id="diseaseUploadBtn">
                    <i class="fas fa-camera"></i>
                    <span class="btn-text" data-i18n="features.disease.upload">Upload Image</span>
                </button>
            </div>
            <div id="diseaseResult" class="result-area"></div>
        </div>

        <!-- Weather Forecast Card -->
        <div class="feature-card weather-card" id="weather">
            <div class="feature-icon">
                <i class="fas fa-cloud-sun"></i>
            </div>
            <h3 data-i18n="features.weather.title">Weather Forecast</h3>
            <p data-i18n="features.weather.desc">Get real-time weather updates and 7-day forecasts for informed farming decisions.</p>
            <div class="feature-actions">
                <input type="text" id="locationInput" placeholder="Enter location" class="location-input" data-i18n-placeholder="features.weather.placeholder"/>
                <button class="feature-btn" id="weatherFetchBtn">
                    <i class="fas fa-search"></i>
                    <span class="btn-text" data-i18n="features.weather.get">Get Weather</span>
                </button>
            </div>
            <div id="weatherResult" class="result-area"></div>
        </div>

        <!-- Market Prices Card -->
        <div class="feature-card market-card" id="market">
            <div class="feature-icon">
                <i class="fas fa-chart-line"></i>
            </div>
            <h3 data-i18n="features.market.title">Market Prices</h3>
            <p data-i18n="features.market.desc">Track current market prices for various crops and plan an effective selling strategy.</p>
            <div class="feature-actions">
                <select id="marketCrop" class="crop-select">
                    <option value="" data-i18n="features.market.select">Select Crop</option>
                    <option value="wheat">Wheat</option>
                    <option value="rice">Rice</option>
                    <option value="onion">Onion</option>
                    <option value="potato">Potato</option>
                </select>
                <button class="feature-btn" id="marketBtn">
                    <i class="fas fa-rupee-sign"></i>
                    <span class="btn-text" data-i18n="features.market.check">Check Prices</span>
                </button>
            </div>
            <div id="marketResult" class="result-area"></div>
        </div>

        <!-- Updated Crop Advisory Section -->
        <section class="features-section" id="advisory">
            <div class="features-container">
                <div class="advisory-container">
                    <div class="advisory-header">
                        <div class="header-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <div class="header-content">
                            <h2 data-i18n="advisory.title">AI Crop Advisory</h2>
                            <p data-i18n="advisory.subtitle">Get expert agricultural advice powered by AI. Ask any question about farming, crops, soil, or weather conditions.</p>
                        </div>
                    </div>

                    <div class="advisory-content">
                        <!-- Crop Advisory Section -->
                        <div class="advisory-left">
                            <!-- Crop Selection and Query Input -->
                            <div class="query-input-section">
                                <div class="crop-selection">
                                    <label for="cropSelect">
                                        <i class="fas fa-seedling"></i> Select Crop Type:
                                    </label>
                                    <select id="cropSelect" class="crop-dropdown">
                                        <option value="">Select Crop (Optional)</option>
                                        <option value="wheat">Wheat (गेहूं)</option>
                                        <option value="rice">Rice (चावल)</option>
                                        <option value="corn">Corn (मक्का)</option>
                                        <option value="tomato">Tomato (टमाटर)</option>
                                        <option value="potato">Potato (आलू)</option>
                                        <option value="onion">Onion (प्याज)</option>
                                        <option value="sugarcane">Sugarcane (गन्ना)</option>
                                    </select>
                                </div>
                                <div class="input-wrapper">
                                    <textarea id="advisoryQuery" class="query-textarea" placeholder="Ask about crop selection, soil management, pest control, farming practices, or weather impact on your crops..." rows="3"></textarea>
                                    <button id="submitQuery" class="submit-btn">
                                        <i class="fas fa-paper-plane"></i>
                                        <span>Get Advice</span>
                                    </button>
                                </div>
                                <div class="query-suggestions">
                                    <span>Try asking:</span>
                                    <button class="suggestion-tag" onclick="setCropQuery('wheat', 'How to increase wheat yield in my region?')">Wheat yield tips</button>
                                    <button class="suggestion-tag" onclick="setCropQuery('rice', 'Best fertilizer for rice cultivation?')">Rice fertilizers</button>
                                    <button class="suggestion-tag" onclick="setCropQuery('tomato', 'How to prevent tomato leaf curl virus?')">Pest & disease help</button>
                                    <button class="suggestion-tag" onclick="setCropQuery('', 'Best crop rotation for my soil type?')">Crop rotation</button>
                                </div>
                            </div>
                            <div id="advisoryResponse" class="response-container">
                                <div class="response-header">
                                    <i class="fas fa-lightbulb"></i>
                                    <h3>AI Response</h3>
                                </div>
                                <div id="responseContent" class="response-content">
                                    <div class="initial-message">
                                        <i class="fas fa-seedling"></i>
                                        <p>Ask me anything about agriculture!</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</section>

<!-- Scheme Fetcher Section -->
<div class="advisory-right">
    <div class="state-selector">
        <label for="stateSearch">Select or Search State:</label>
        <input type="text" id="stateSearch" placeholder="Search for a state..." class="search-input">
        <select id="stateSelect" class="state-dropdown">
            <option value="">Select State</option>
            <option value="Andhra Pradesh">Andhra Pradesh</option>
            <option value="Arunachal Pradesh">Arunachal Pradesh</option>
            <option value="Assam">Assam</option>
            <option value="Bihar">Bihar</option>
            <option value="Chhattisgarh">Chhattisgarh</option>
            <option value="Goa">Goa</option>
            <option value="Gujarat">Gujarat</option>
            <option value="Haryana">Haryana</option>
            <option value="Himachal Pradesh">Himachal Pradesh</option>
            <option value="Jammu and Kashmir">Jammu and Kashmir</option>
            <option value="Jharkhand">Jharkhand</option>
            <option value="Karnataka">Karnataka</option>
            <option value="Kerala">Kerala</option>
            <option value="Ladakh">Ladakh</option>
            <option value="Lakshadweep">Lakshadweep</option>
            <option value="Madhya Pradesh">Madhya Pradesh</option>
            <option value="Maharashtra">Maharashtra</option>
            <option value="Manipur">Manipur</option>
            <option value="Meghalaya">Meghalaya</option>
            <option value="Mizoram">Mizoram</option>
            <option value="Nagaland">Nagaland</option>
            <option value="Odisha">Odisha</option>
            <option value="Punjab">Punjab</option>
            <option value="Rajasthan">Rajasthan</option>
            <option value="Sikkim">Sikkim</option>
            <option value="Tamil Nadu">Tamil Nadu</option>
            <option value="Telangana">Telangana</option>
            <option value="Tripura">Tripura</option>
            <option value="Uttar Pradesh">Uttar Pradesh</option>
            <option value="Uttarakhand">Uttarakhand</option>
            <option value="West Bengal">West Bengal</option>
        </select>
        <button id="fetchSchemesBtn" class="btn-primary">Fetch Schemes</button>
    </div>

    <!-- Schemes Display Box -->
    <div id="schemesBox" class="schemes-box" style="margin-top: 1rem; border: 1px solid #ccc; padding: 1rem; border-radius: 8px; display: none;">
        <h3>Schemes for <span id="selectedState"></span></h3>
        <div id="schemesContainer"></div>
    </div>
</div>

<!-- Soil Parameters Section -->
<section class="soil-section" id="soil">
    <div class="container">
        <h2 class="section-title" data-i18n="soil.title">Soil Parameter Monitoring</h2>
        <div class="soil-dashboard">
            <div class="sensor-controls">
                <select id="sensorSelect" class="sensor-select">
                    <option value="SOIL_001">Sensor 1 - Field A</option>
                    <option value="SOIL_002">Sensor 2 - Field B</option>
                    <option value="SOIL_003">Sensor 3 - Field C</option>
                </select>
                <button class="btn-primary" id="soilRefreshBtn">
                    <i class="fas fa-sync"></i>
                    <span class="btn-text" data-i18n="soil.refresh">Refresh Data</span>
                </button>
                <button id="voiceAssistBtn" class="btn-primary">
                    <i class="fas fa-volume-up"></i>
                    <span class="btn-text" data-i18n="soil.voice">Voice Assistance</span>
                </button>
            </div>
            <div id="soilData" class="soil-parameters">
                <div class="param-card">
                    <h4 data-i18n="soil.nitrogen">Nitrogen (N)</h4>
                    <div class="param-value">--</div>
                    <div class="param-status" data-i18n="soil.loading">Loading...</div>
                </div>
                <div class="param-card">
                    <h4 data-i18n="soil.phosphorous">Phosphorous (P)</h4>
                    <div class="param-value">--</div>
                    <div class="param-status" data-i18n="soil.loading">Loading...</div>
                </div>
                <div class="param-card">
                    <h4 data-i18n="soil.potassium">Potassium (K)</h4>
                    <div class="param-value">--</div>
                    <div class="param-status" data-i18n="soil.loading">Loading...</div>
                </div>
            </div>

            <div id="soilAdviceResult" class="advice-box" data-i18n="soil.advice">
                <!-- Gemini advice will be displayed here -->
                Your soil advice will appear here.
            </div>
        </div>
    </div>
</section>

<!-- Scripts: ES module entry -->
<script type="module" src="/js/main.js"></script>
<!-- Language translation module -->
<script type="module" src="/js/translation.js"></script>
<script src="/js/schemesFetcher.js"></script>
</body>
</html>
